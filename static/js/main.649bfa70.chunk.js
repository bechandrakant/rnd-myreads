(this["webpackJsonprnd-my-reads"]=this["webpackJsonprnd-my-reads"]||[]).push([[0],{27:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(1),s=n.n(c),a=n(16),i=n.n(a),r=n(17),l=n(18),d=n(21),h=n(20),b=n(11),j="https://reactnd-books-api.udacity.com",u=localStorage.token;u||(u=localStorage.token=Math.random().toString(36).substr(-8));var O={Accept:"application/json",Authorization:u},k=function(){return fetch("".concat(j,"/books"),{headers:O}).then((function(e){return e.json()})).then((function(e){return e.books}))},v=function(e,t){return fetch("".concat(j,"/books/").concat(e.id),{method:"PUT",headers:Object(b.a)(Object(b.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},f=(n(27),n(2)),p=n(10),x=function(e){var t,n,s,a,i=e.bookData,r=e.onChange,l=Object(c.useState)(i.shelf),d=Object(p.a)(l,2),h=d[0],b=d[1],j=null!==(t=null===i||void 0===i||null===(n=i.imageLinks)||void 0===n?void 0:n.thumbnail)&&void 0!==t?t:"https://upload.wikimedia.org/wikipedia/commons/4/47/Comic_image_missing.png",u=null!==(s=null===i||void 0===i?void 0:i.title)&&void 0!==s?s:"No title Found";return Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"book",children:[Object(o.jsxs)("div",{className:"book-top",children:[Object(o.jsx)("div",{className:"book-cover",style:{width:150,height:200,backgroundImage:"url(".concat(j,")")}}),Object(o.jsx)("div",{className:"book-shelf-changer",children:Object(o.jsxs)("select",{onChange:function(e){b(e.target.value),r(i,e.target.value)},value:h||"none",children:[Object(o.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(o.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(o.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(o.jsx)("option",{value:"read",children:"Read"}),Object(o.jsx)("option",{value:"none",children:"None"})]})})]}),Object(o.jsx)("div",{className:"book-title",children:u}),Object(o.jsx)("div",{className:"book-authors",children:null===i||void 0===i||null===(a=i.authors)||void 0===a?void 0:a.join(", ")})]})})},g=function(e){var t=e.books,n=e.onChange,c=t.map((function(e){return Object(o.jsx)(x,{bookData:e,onChange:n},e.id)}));return Object(o.jsx)("ol",{className:"books-grid",children:c})},m=function(e){var t=e.title,n=e.books,c=e.onChange;return Object(o.jsxs)("div",{className:"bookshelf",children:[Object(o.jsx)("h2",{className:"bookshelf-title",children:t}),Object(o.jsx)("div",{className:"bookshelf-books",children:Object(o.jsx)(g,{books:n,onChange:c})})]})},N=n(7),y=[{title:"Currently Reading",id:"currentlyReading"},{title:"Want To Read",id:"wantToRead"},{title:"Read",id:"read"}],C=function(e){var t=e.books,n=e.onChange,c=y.map((function(e,c){var s=t.filter((function(t){return t.shelf===e.id}));return Object(o.jsx)(m,{title:e.title,books:s,onChange:n},c)}));return Object(o.jsxs)("div",{className:"list-books",children:[Object(o.jsx)("div",{className:"list-books-title",children:Object(o.jsx)("h1",{children:"MyReads: A Book Lending App"})}),Object(o.jsx)("div",{className:"list-books-content",children:Object(o.jsx)("div",{children:c})}),Object(o.jsx)(N.b,{to:"/search",children:Object(o.jsx)("div",{className:"open-search",children:"Add a book"})})]})},R=function(e){var t=e.books,n=e.onChange,s=Object(c.useState)(null),a=Object(p.a)(s,2),i=a[0],r=a[1],l=Object(c.useState)(""),d=Object(p.a)(l,2),h=d[0],u=d[1],k=function(e){0===e.length?r(null):function(e){return fetch("".concat(j,"/search"),{method:"POST",headers:Object(b.a)(Object(b.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(e).then((function(e){e.length>0?(e.forEach((function(e){var n=t.filter((function(t){return t.id===e.id}));n.length&&(e.shelf=n[0].shelf)})),r(e)):r(null)}))};return Object(o.jsxs)("div",{className:"search-books",children:[Object(o.jsxs)("div",{className:"search-books-bar",children:[Object(o.jsx)(N.b,{to:"/",children:Object(o.jsx)("div",{className:"close-search",children:"Close"})}),Object(o.jsx)("div",{className:"search-books-input-wrapper",children:Object(o.jsx)("input",{type:"text",placeholder:"Search by title or author",value:h,onChange:function(e){u(e.target.value),k(e.target.value)}})})]}),Object(o.jsx)("div",{className:"search-books-results",children:i?Object(o.jsx)("ol",{className:"books-grid",children:Object(o.jsx)(g,{books:i,onChange:n})}):Object(o.jsx)("h4",{children:"No matching results found!"})})]})},S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={books:[]},e.componentDidMount=function(){e.fetchBooks()},e.fetchBooks=function(){k().then((function(t){return e.setState({books:t})}))},e.updateBook=function(t,n){v(t,n).then((function(){return e.fetchBooks()}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{className:"app",children:[Object(o.jsx)(f.a,{exact:!0,path:"/",children:Object(o.jsx)(C,{books:this.state.books,onChange:this.updateBook})}),Object(o.jsx)(f.a,{exact:!0,path:"/search",children:Object(o.jsx)(R,{books:this.state.books,onChange:this.updateBook})})]})}}]),n}(s.a.Component);n(36);i.a.render(Object(o.jsx)(N.a,{children:Object(o.jsx)(S,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.649bfa70.chunk.js.map